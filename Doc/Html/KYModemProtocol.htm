<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en-ca">

<!--/* Group=Papers*/ -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Language" content="en-ca" />
  <meta name="Workfile" content="$Workfile: KYModemProtocol.htm$: documentation" />
  <meta name="Revision" content="$Revision: 13$" />
  <meta name="robots" content="index" />
  <meta name="keywords" content="YModem, network, protocol" />
  <!-- Dublin Core Metadata Package -->
  <meta name="DC.title" content="YModem Protocol" />
  <meta name="DC.creator" content="Kolakovi&#263;, Darko" />
  <meta name="DC.creator.vCard.EMAIL.internet" content="ddarko at users.sourceforge.net" />
  <meta name="DC.Contributor" content="$Author: Darko Kolakovic$" />
  <meta name="DC.Rights" content="&copy; Darko Kolakovi&#263;, 1985-2032, All Rights Reserved." />
  <meta name="DC.subject" content="Color names" />
  <meta name="DC.description.abstract" content="YModem File transfer protocol">
  <meta name="DC.publisher" content="CommonSoft Inc." />
  <meta name="DC.date" content="$Date: 2007-03-22 12:52:17$" />
  <meta name="DC.type" content="Text.Article" />
  <meta name="DC.format" content="application/html" />
  <meta name="DC.language" content="en_ca" />
  <meta name="DC.identifier.Revision" content="$Revision: 13$" />
  <meta name="DC.relation.HasVersion" content="http://babylonlib.cvs.sourceforge.net/babylonlib" />
  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
  <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" />
  <title>YModem Protocol</title>
  <link rel="stylesheet" type="text/css" href="../Res/KDocument.css" />
  <link rel="stylesheet" type="text/css" href="../Res/KTables.css" />
  <link rel="SHORTCUT ICON" href="../Res/SrcPool.ico" />
  <link rel="icon" href="../Res/SrcPool.ico" type="image/ico" />
  <base target="_self" />
</head>

<body>
  <!--Article - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <h1>YModem Protocol</h1>

  <p>YModem protocol supports batch mode file transfers and it is derived from
  <i><a href="KXModemProtocol.htm#XModem1k">XModem 1k</a></i>. Transmiter sends
  file information in the first data block (
  <a href="KXModemProtocol.htm#BlockNo">block number</a> 0 ).</p>

  <p>Block 0 has following format:</p>

  <table border="1" width="81%" cellspacing="0" summary="Block 0 format">
    <tr>
      <td width="14%" align="center" bgcolor="#99CCFF"><code>&lt;SOH&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;~BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#D3D3D3"><code>&lt;FileInfo&gt;
      N&nbsp;bytes</code></td>
      <td width="29%" align="center" bgcolor="#FFFF99"><code>&lt;CRC16&gt;
      2&nbsp;bytes</code></td>
    </tr>
  </table><br />


  <table border="1" width="35%" cellspacing="0" summary="FileInfo">
    <tr>
      <td width="19%" align="center" colspan="4" bgcolor="#D3D3D3">
      <code>&lt;FileInfo&gt; N&nbsp;bytes</code></td>
    </tr>

    <tr>
      <td width="3%" align="center" bgcolor="#D3D3D3">
      &lt;FileName&gt;&lt;0&gt;</td>
      <td width="13%" align="center" bgcolor="#999999">
      &lt;FileSize&gt;&lt;0&gt;</td>
      <td width="2%" align="center" bgcolor="#999999">
      &lt;FileDate&gt;&lt;0&gt;</td>
      <td width="1%" align="center" bgcolor="#D3D3D3">&lt;0&gt;</td>
    </tr>
  </table>

  <ul>
    <li><b>FileInfo</b> field contains file information and has variable
    length. The last byte in the filed is a <i>terminator</i>
    &#39;<b>0</b>&#39; (zero).</li>
    <li><b>FileName</b> field is only <b>required</b> file information. It has
    variable length and it is ended with the <i>terminator</i>
    &#39;<b>0</b>&#39; (zero). It contains name of the file being transmitted
    in lower case letters. File path, if exists, is delimited with &#39;/&#39;
    characters.</li>
    <li><b>FileSize</b> field is optional and it specifies the file length. It
    has variable length and it is ended with the <i>terminator</i>
    &#39;<b>0</b>&#39; (zero). The receiver could truncate data received up to
    size specified by this field.</li>
    <li><b>FileDate</b> field is optional and it specifies the file
    modification date. It has variable length and it is ended with the
    <i>terminator</i> &#39;<b>0</b>&#39; (zero). Date is represented using Unix
    convention as an octal number of seconds since 1970-01-01 UTC .</li>
  </ul>

  <p>Block 0 with all data filled with zeroes at the end of transmission
  indicates the last file in the batch.</p>

  <table border="1" width="81%" cellspacing="0"
  summary="last file in the batch">
    <tr>
      <td width="14%" align="center" bgcolor="#99CCFF"><code>&lt;SOH&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;~BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#D3D3D3"><code>128
      zeroes</code></td>
      <td width="29%" align="center" bgcolor="#FFFF99"><code>&lt;CRC16&gt;
      2&nbsp;bytes</code></td>
    </tr>
  </table>

  <p><a name="Data_blocks" id="Data_blocks">Data blocks</a> have two possible
  formats:</p>

  <table border="1" width="81%" cellspacing="0" summary="Data blocks">
    <tr>
      <td width="14%" align="center" bgcolor="#99CCFF"><code>&lt;STX&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;~BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center"><code>&lt;Data&gt;
      1024&nbsp;bytes</code></td>
      <td width="29%" align="center" bgcolor="#FFFF99"><code>&lt;CRC16&gt;
      2&nbsp;bytes</code></td>
    </tr>
  </table>

  <table border="1" width="81%" cellspacing="0"
  summary="Data block&#39;s 2nd format">
    <tr>
      <td width="14%" align="center" bgcolor="#99CCFF"><code>&lt;SOH&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center" bgcolor="#99FFCC"><code>&lt;~BlockNo&gt;
      1&nbsp;byte</code></td>
      <td width="19%" align="center"><code>&lt;Data&gt;
      128&nbsp;bytes</code></td>
      <td width="29%" align="center" bgcolor="#FFFF99"><code>&lt;CRC16&gt;
      2&nbsp;bytes</code></td>
    </tr>
  </table>

  <p>A typical YModem protocol transfer looks like this:</p>

  <table border="0" width="81%" cellspacing="0"
  summary="YModem protocol transfer">
    <tr>
      <th width="33%">Transmitter</th>
      <th width="6%" align="center"></th>
      <th width="41%">Receiver</th>
      <th width="81%"></th>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>C</code></td>
      <td width="81%" bgcolor="#FFCCFF">handshake</td>
    </tr>

    <tr>
      <td width="33%">
      <code>&lt;SOH&gt;&lt;0&gt;&lt;255&gt;&shy;&lt;FileInfo&gt;&shy;&lt;CRC16&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#FFCCFF">response</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#FFCCFF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>C</code></td>
      <td width="81%" bgcolor="#FFCCFF">handshake</td>
    </tr>

    <tr>
      <td width="33%">
      <code>&lt;STX&gt;&lt;1&gt;&shy;&lt;254&gt;&shy;&lt;Data&nbsp;1024&nbsp;bytes&gt;&lt;CRC16&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#FFCCFF">response</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#FFCCFF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%">
      <code>&lt;STX&gt;&lt;2&gt;&shy;&lt;253&gt;&shy;&lt;Data&nbsp;1024&nbsp;bytes&gt;&lt;CRC16&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#FFCCFF">response</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#FFCCFF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%"><code>&lt;EOT&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#FFCCFF">end of transmission</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#FFCCFF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>C</code></td>
      <td width="81%" bgcolor="#CC99FF">handshake</td>
    </tr>

    <tr>
      <td width="33%">
      <code>&lt;SOH&gt;&lt;0&gt;&shy;&lt;255&gt;&shy;&lt;FileInfo&gt;&shy;&lt;CRC16&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#CC99FF">response</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#CC99FF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>C</code></td>
      <td width="81%" bgcolor="#CC99FF">handshake</td>
    </tr>

    <tr>
      <td width="33%">
      <code>&lt;STX&gt;&lt;1&gt;&shy;&lt;254&gt;&shy;&lt;Data&nbsp;1024&nbsp;bytes&gt;&lt;CRC16&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#CC99FF">response</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#CC99FF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%"><code>&lt;EOT&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#CC99FF">end of transmission</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#CC99FF">acknowledgment</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>C</code></td>
      <td width="81%" bgcolor="#3399FF">handshake</td>
    </tr>

    <tr>
      <td width="33%">
      <code>&lt;SOH&gt;&lt;0&gt;&shy;&lt;255&gt;&shy;&lt;&#39;0&#39;&nbsp;128&nbsp;bytes&gt;&shy;&lt;CRC16&gt;</code></td>
      <td width="6%" align="center"><code>&rarr;</code></td>
      <td width="41%">&nbsp;</td>
      <td width="81%" bgcolor="#3399FF">end of batch</td>
    </tr>

    <tr>
      <td width="33%">&nbsp;</td>
      <td width="6%" align="center"><code>&larr;</code></td>
      <td width="41%"><code>&lt;ACK&gt;</code></td>
      <td width="81%" bgcolor="#3399FF">acknowledgment</td>
    </tr>
  </table>

  <p>
  <b><a name="Reference" id="Reference">Reference</a>:</b>
    <ol>
      <li><a href="../Std/YModem.htm">XModem / YModem Protocol Reference</a> by Chuck
      Forsberg [1988-10-14]</li>
      <li><a href="KXModemProtocol.htm">XModem Protocol</a></li>
    </ol>
  </p>
  <!-- EOT ================================================================= -->
  <div id="ID_EOT" style="text-align: right">
    <hr />
    <a href="index.html" title="Go to home&hellip;" class="Plain" target="_main">
    &#x2302;</a>
  </div>
  </body>
<!-- ==========================================================================
  $Log:
   10   Biblioteka1.9         2005-08-17 16:19:49  Darko Kolakovic xhtml
   9    Biblioteka1.8         2005-08-02 18:10:49  Darko Kolakovic Reformatting
   8    Biblioteka1.7         2005-07-29 16:06:18  Darko Kolakovic
   7    Biblioteka1.6         2005-07-28 10:25:49  Darko Kolakovic followed W3C
        recomendation
   6    Biblioteka1.5         2004-03-02 14:44:51  Darko           robots are
        allowed
   5    Biblioteka1.4         2003-01-27 11:25:30  Darko           Replaced CSS
   4    Biblioteka1.3         2003-01-18 20:53:45  Darko           Log tag
   3    Biblioteka1.2         2002-12-05 18:40:00  Darko Kolakovic Updated
        transfer example
   2    Biblioteka1.1         2002-11-29 01:40:07  Darko           Fixed link to
        xModem
   1    Biblioteka1.0         2002-11-29 01:36:57  Darko
  $
-->
</html>
