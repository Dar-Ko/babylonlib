<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- Group=Examples -->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Language" content="en" />
  <meta name="Workfile" content="$RCSfile: TestPopupWin.htm,v $: documentation" />
  <meta name="Revision" content="$Revision: 1.4 $ $Date: 2008/08/15 18:48:57 $" />
  <meta name="robots" content="index" />
  <meta name="keywords" content="popup, script, HTML, test, Debugging" />
  <meta name="Editor" content="$Author: ddarko $" />
  <!-- Dublin Core Metadata Package -->
  <meta name="DC.title" content="Test Popup Window" />
  <meta name="DC.creator" content="Kolakovi&#263;, Darko" />
  <meta name="DC.creator.vCard.EMAIL.internet" content="ddarko at users.sourceforge.net" />
  <meta name="DC.Contributor" content="$Author: ddarko $" />
  <meta name="DC.Rights" content="&copy; Darko Kolakovi&#263;, 1985-2032, All Rights Reserved." />
  <meta name="DC.subject" content="Test cases" />
  <meta name="DC.description.abstract" content="Test an HTML browser capabilities" />
  <meta name="DC.publisher" content="CommonSoft Inc." />
  <meta name="DC.date" content="$Date: 2008/08/15 18:48:57 $" />
  <meta name="DC.type" content="Text.Article" />
  <meta name="DC.format" content="application/html" />
  <meta name="DC.language" content="en_ca" />
  <meta name="DC.identifier.ISBN" content="$Isbn$" />
  <meta name="DC.relation.HasVersion" content="http://babylonlib.cvs.sourceforge.net/babylonlib" />
  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
  <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" />
  <link rel="stylesheet" type="text/css" media="all"
    href="../../../../../Doc/Res/KDocument.css" />
  <link rel="icon" type="image/ico"
    href="../../../../../Doc/Res/icoSample.ico" />
  <title>Test Popup Window</title>
  <base target="_self" />

  <script type="text/javascript" language="JavaScript">
  //<![CDATA[
      /*This function can be called from a variety of objects such as a link &lt;a&gt;, an image map &lt;area&gt;, or the &lt;BODY ...&gt; element for opening the popup automatically.
        Different links can target the same popup by all using the same name.
        Returns: true to open URL in the parent window or false to cancel... event
        Example:
        <body onLoad="popup('autopopup.html', 'IDS_POPUP')">
        <a href="popupbasic.html" onClick="return popup(this, 'IDS_POPUP')">my popup<\/a>
       */
    function OpenPopupWnd(oUrl, //[in] URL as a string or the object calling the function
                          strWndId //[in] unique name for the popup window. More than one link can target the same popup by using the same unique popup name.
                          )
    {
    var bResult = true; //Pass event handling to the parent if true, otherwise finish with the event handling
    //Verify if focus method exists. The method will bring the popup to the front.
    if ( window.focus )
      {
      bResult = false; //return false to cancel further onclick handling

      var hrefUrl;
      if (typeof(oUrl) == 'string')
        hrefUrl=oUrl; //Set popup URL
      else if (oUrl.href) //Get URL from the href attribute of  anchor/area object
        hrefUrl=oUrl.href;
      else if(oUrl.jojo)//.ID_LIST) //URL is in form's list box
        {
        hrefUrl = (oUrl.jojo.options[oUrl.ID_LIST.selectedIndex].value);
//        hrefUrl = (oUrl.ID_LIST.options[oUrl.ID_LIST.selectedIndex].value);
        }
      else if (oUrl.target) //URL would be submited from a form object
        {
        hrefUrl = ""; //Open blank popup and submit URL later
        oUrl.target = strWndId;
        bResult = true; //return true for further onsubmit handling
        }

      //debugger;
      wndPopup = window.open(hrefUrl, strWndId, 'width=400,height=200,scrollbars=yes');
      if (wndPopup)
        {
      //wndPopup.document.write("<h1>Popup Test!<\/h1>\n<p><b>" + hrefUrl +
      //                        "<\/b><\/p>\n<p><b>ID = " + strWndId + "<\/b><\/p>\n");
        wndPopup.document.bgColor="lightblue";
        wndPopup.focus(); //Bring popup at the front
        }
      else
        {
        //Note: Check if popup window is not blocked in browser's setting
        bResult = true; //Open Url in parent window
        }

    }
    return bResult; //return true to open URL in parent window or
            //return false to cancel further event handling

    }
  //]]>
  </script>
  <script type="text/javascript">
  var ie = document.all;
  var dom=document.getElementById;
  var ns4=document.layers;
  var calunits=document.layers? "" : "px";
  var bouncelimit;
  var direction="up";
  var usedropin=1;

  function EmbedPopupWnd(strUrl, //[in] URL
                         strElementId //[in] unique name for the popup box.

                        )
  {
  if (!dom && !ie && !ns4)
    {
    window.open(strUrl, "ID_POPUP", "scrollbars=1");
    }
  else
    {
    bouncelimit=32; //(must be divisible by 8)
    crossobj=(dom) ? document.getElementById("ID_TIPBOX").style :
                     ie? document.all.ID_TIPBOX : document.ID_TIPBOX;
    crossframe=(dom) ? document.getElementById(strElementId) :
                       ie? document.all.ID_TIPBOXVIEW : document.ID_TIPBOXVIEW;

    crossframe.src = strUrl;

    if(usedropin)
      {
      scroll_top = (ie)? truebody().scrollTop : window.pageYOffset;
      crossobj.top=scroll_top-250+calunits;
      }

    crossobj.visibility = (dom || ie) ? "visible" : "show";
    if(usedropin)
      {
      dropstart = setInterval("DropDown()",50);
      }
    }
  }

  //---------------------------------------------------------------------------
  function DropDown()
  {
  scroll_top = (ie)? truebody().scrollTop : window.pageYOffset;

  if (parseInt(crossobj.top) < 0 + scroll_top)
    {
    crossobj.top = parseInt(crossobj.top) + 40 + calunits;
    if (parseInt(crossobj.top ) > 0 + scroll_top)
      {
      crossobj.top = 0 + scroll_top;
      }
    }
  else
    {
    clearInterval(dropstart);
    effectStart=setInterval("Effect()",50);
    }
  }

  //----------------------------------------------------------------------------
  function Effect()
    {
    crossobj.top = parseInt(crossobj.top) - bouncelimit + calunits;
    if (bouncelimit<0)
      bouncelimit += 8;
    bouncelimit = bouncelimit * -1;
    if (bouncelimit==0)
      {
      clearInterval(effectStart);
      }
    }

  //----------------------------------------------------------------------------
  function Destroy()
    {
    if (window.effectStart)
      clearInterval(effectStart);
    crossobj.visibility="hidden"
    }

  //----------------------------------------------------------------------------
  function truebody()
  {
  return (document.compatMode && document.compatMode != "BackCompat") ?
        document.documentElement :
        document.body
  }
  </script>
</head>

<body onload="OpenPopupWnd('TestTextBasic.htm', 'ID_POPUPONLOAD')" >
<!-- The onload event occurs when the user agent finishes loading a
window.
The onclick event occurs when the pointing device button is
clicked over an element.
The onsubmit event occurs when a form is submitted. It only applies to the FORM element.
-->
<h1>Test Popup Window</h1>

<noscript>
  <p>Appears that JavaScript is <b>disabled</b>. Check configuration options for your browser!</p></noscript>

<p>A <i>popup window</i> is a window that is usually smaller than a
browser window and usually is without some of the common decorations like tool
bars or status bars.
</p>


<h5>How to open a new window within the script</h5>
<dl>
  <dt><u><b><code>onload</code> event</b></u></dt>
  <dd><p>New window will be created when this page is loaded:<br />
    <code>&lt;body onload="window.open('strUrl', 'strWndId', 'width=400,height=200');"&gt;
    </code></p>
    <p>If the new window is not created, change browser's option blocking the
    popup windows.</p>
  </dd>

  <dt><u><b><code>target</code> attribute</b></u></dt>
  <dd><p>New browser window can be opened using the <code>target</code> attribute of
  an anchor <code>&lt;a&gt;</code> or on a <code>&lt;form&gt;</code> element:<br />
  <code>&lt;a href="strUrl" target="strWndId"&gt;some text&lt;/a&gt;</code></p>

  <a href="TestTableJoin.htm" target="ID_NEWWINDOW">Open new window</a> or
  <form action="TestTableComplex.htm" target="ID_NEWWINDOW">
    click on button
    <input type="submit" value="Open new window" />
  </form>
  <p>No special scripts are required to create new window.</p>
  </dd>

  <dt><u><b><code>onclick</code> event</b></u></dt>
  <dd><p>In following example,
    <a href="TestList.htm" onclick="return OpenPopupWnd(this,'ID_POPUP')" title="Open Popup Window">this link</a>
    opens a medium-sized popup window:<br />
    <code>&lt;a href="strUrl" onclick="return OpenPopupWnd(this,'strWndId')"&gt;</code><br />
    where <code>OpenPopupWnd</code> is a script calling <code>window.open</code> method.</p>
    <p>Same code could be used with <code>&lt;area&gt;</code> element, when
    <code>onclick</code> event is fired:<br />
	  <code>
	  &lt;map id="mapId"&gt;<br />
	  &nbsp;&nbsp;&lt;area href="strUrl" ... onclick="return OpenPopupWnd(this,'strWndId')"&gt;<br />
	  &lt;/map&gt;
	  </code></p>
	  <map name="ID_IMAGEAREA" id="ID_IMAGEAREA">
	    <area href="TestTableSimple.htm" alt="Link 1"
	          coords="10,10,120,120" shape="rect"
	          onclick="return OpenPopupWnd(this, 'ID_POPUP')" />
	    <area href="TestTextAttributes.htm" alt="Link 2"
	          coords="140,10,180,50" shape="rect"
	          onclick="return OpenPopupWnd(this, 'ID_POPUP')" />
	    <area shape="default" nohref="nohref" alt="Unreferenced Area" />
	  </map>
	  <img border="0" src="Images/TestArea.gif" alt="Areas" usemap="#ID_IMAGEAREA" width="190" height="130" />
  </dd>

  <dt><u><b><code>onsubmit</code> event</b></u></dt>
  <dd>Next example shows one way how to open new window within a <code>&lt;form&gt;</code>:<br />
  <code>&lt;form target="strWndId" method="post" action="strUrl"
         onsubmit="OpenPopupWnd(this, 'strWndId')"&gt;</code><br />

  <form target="ID_POPUP"
        method="post"
        action="TestTableColSpan.htm"
        onsubmit="OpenPopupWnd(this, 'ID_POPUP')">

     Open selected web page:
     <select name="jojo" id="ID_LIST" size="1" style="background-color: rgb(255, 255, 160);">
       <option value="">Select web site...</option>
       <option value="http://www.yahoo.com/">Yahoo!</option>
       <option value="http://www.google.com/">Google</option>
     </select>
     <input type="button" id="ID_BTNSELECT" value="Open popup window"
            onclick="OpenPopupWnd(this.form,'ID_POPUP');" /><br />

     <code>submit</code> URL defined in <code>action</code> parameter:<br />
     <input value="Open popup window" type="submit" />
  </form>
  </dd>

  <dt><u><b>JavaScript Message Box</b></u></dt>
  <dd>
  <code>&lt;<i>element [argument="value"]</i> onclick="javascript:alert|confirm|prompt('some text')"&gt;</code>
  <div align="left">
    <form action="">
      <input type="button" value="Alert"
             onclick="javascript:alert('alert(): This is the Alert message.')" />
      <input type="button" value="Confirm"
             onclick="javascript:confirm('confirm(): Confirm a prompt with OK or Cancel.')" />
      <input type="button" value="Prompt"
             onclick="javascript:prompt('prompt(): Prompt for the user\'s input.')" />
    </form>
  </div>
  </dd>
  <dt><u><b><code>&lt;iframe&gt;</code> element</b></u></dt>
  <dd><p>In the following example the hidden <code>&lt;iframe&gt;</code> element is
  made visible, giving only appearance of the new popup window. In reality the element
  is embedded in the existing window.</p>

	<p><a href="javascript:EmbedPopupWnd('TestTextBasic.htm','ID_TIPBOXVIEW')">Click here</a>
	to view popup window.</p>
	<div id="ID_TIPBOX" style="border: thin solid rgb(204, 204, 204);
	                        position: absolute;
	                        visibility: hidden;
	                        width: 304px; height: 200px;
	                        background-color: rgb(245, 245, 245);
	                        top: 480px;">
	  <div style="background-color: navy;" align="right">
	    <a href="#" onclick="Destroy();return false">
	    <font color="#ffffff">[X]</font></a>
	  </div>
	  <p>
	  <iframe id="ID_TIPBOXVIEW" name="ID_TIPBOXVIEW" src="TestTextBasic.htm"
	          frameborder="0" height="200" width="300">
	  </iframe>
	  </p>
	</div>

  </dd>

</dl>
<br />


<h3><code>open()</code> Parameters</h3>
<p><code><b>window.open(strUrl, strName[, features[, replace]])</b></code></p>

<p><code><b>strUrl</b></code> - this is
a string containing the URL of the document to open in the new window. If
empty string is specified, an empty window will be created.</p>

<p><code><b>strName</b></code> - string containing the name of the new
window. This can be used as the <code><i>target</i></code> of an anchor
<code>&lt;a&gt;</code> or on a <code>&lt;form&gt;</code> element to
reference the new window.</p>

<p><code><b>features</b></code> - optional string that contains
details of which of the standard window features are to be used with the new
window. This takes the form of a comma-delimited list. Most of these features
require <code>yes</code>/<code>1</code> or <code>no</code>/<code>0</code> and
any of these can be enabled by simply listing the feature, defaulting <code>yes</code> value.
Also, if you don't supply any
of the feature arguments, all boolean parameters are enabled with deafult values;
if you do specify any feature parameters, <code>titlebar</code> and <code>hotkeys</code>
still default to yes but all others are no.</p>

<p><code><b>replace</b></code> - optional boolean parameter. If true, the new location
will replace the current page in the browser's navigation history. Note that
some browsers will simply ignore this parameter.</p>

<p>Returns: a reference (or handle) to the newly opened window.</p>

<table width="774" border="0" title="window.open Parameters"
style="border-collapse: collapse" cellpadding="2"
cellspacing="1">
  <tr>
    <th width="20%" height="22">
    <b>features Value</b></th>
    <th width="16" height="22">
    &nbsp;</th>
    <th width="518" height="22"><b>
    Description</b></th>
  </tr>
  <tr>
    <td width="20%">
    <code><b>alwaysLowered</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Creates a window that always floats below
    other windows.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>alwaysRaised</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Creates a window that always floats above other windows.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>channelmode</b></code></td>
    <td width="16">
    <code><b>
    <img border="0" src="../../../../../Doc/Res/S/icoIe.gif" alt="IE" title="Internet Explorer" width="16"
    height="16" /></b></code></td>
    <td width="518">Displays the new window in channel mode.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>dependent</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Creates the new window as a child of the
    current window; the child windows will close when the parent window closes.
    </td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>directories</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Shows or hides the standard directory buttons
    with links to other web sites.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>fullscreen</b></code></td>
    <td width="16">
    <code><b><img
    border="0" src="../../../../../Doc/Res/S/icoIe.gif" alt="IE" title="Internet Explorer" width="16" height="16" /></b></code></td>
    <td width="518">Displays the new window over whole screen.</td>
  </tr>
  <tr>
    <td width="20%"><code><b>height</b></code></td>
    <td width="16">&nbsp;</td>
    <td width="518">Sets the height of the new window in pixels.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>hotkeys</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Disables or enables the use of hotkeys (except security
    and quit hotkeys) in a window without a menubar.</td>
  </tr>
  <tr>
    <td width="20%"><code><b>innerHeight</b></code></td>
    <td width="16"><code><b> <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Inner (working area) height of the window in pixels.</td>
  </tr>
  <tr>
    <td width="20%"><code><b>innerWidth</b></code></td>
    <td width="16"><code><b> <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Inner (working area) width of the window in pixels.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>left</b></code></td>
    <td width="16">
    <code><b><img border="0"
    src="../../../../../Doc/Res/S/icoIe.gif" alt="IE" title="Internet Explorer" width="16" height="16" /></b></code></td>
    <td width="518">
    Distance from the left side of the screen in pixels where new window
    will be displayed; same as <code>screenX</code>.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>location</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Shows or hides the standard <i>Location (URL)</i>
    text entry field in
    the toolbar of new browser window.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>menubar</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Shows or hides the standard menu bar.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>outerHeight</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Outer height of the new window in pixels.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>outerWidth</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Outer width of the new window in pixels.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>resizable</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Allows the resizing of the new window by the
    user.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>screenX</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">
    Distance from the left side of the screen in pixels where new window
    will be displayed.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>screenY</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Distance from the top of the screen in pixels where new window
    will be displayed.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>scrollbars</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Shows or hides the standard horizontal and
    vertical scrollbars, when needed.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>status</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Shows or hides the standard browser status
    bar at the bottom.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>titlebar</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Shows or hides the standard title bar.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>toolbar</b></code></td>
    <td width="16">
    &nbsp;</td>
    <td width="518">Shows or hides the standard browser toolbar
    buttons.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>top</b></code></td>
    <td width="16">
    <code><b><img border="0"
    src="../../../../../Doc/Res/S/icoIe.gif" alt="IE" title="Internet Explorer" width="16" height="16" /></b></code></td>
    <td width="518">Distance from the top of the screen in pixels where new window
    will be displayed; same as <code>screenY</code>.</td>
  </tr>
  <tr>
    <td width="20%"><code><b>width</b></code></td>
    <td width="16">&nbsp;</td>
    <td width="518">Sets the width of the new window in pixels.</td>
  </tr>
  <tr>
    <td width="20%">
    <code><b>z-lock</b></code></td>
    <td width="16">
    <code><b>
    <img src="../../../../../Doc/Res/S/icoNetscape.gif" alt="NS" title="Netscape" width="16" height="16" /></b></code></td>
    <td width="518">Prevents the new window changing its z-order and displaying before
    other windows, when it is made active (in focus).</td>
  </tr>
  </table>
<br />
<small>Note:
   <img src="../../../../../Doc/Res/S/typeAscii.png" title="SBCS/ASCII"
        alt="SBCS/ASCII" width="16" height="16" />
   this is an Sigle Byte Chatacter Set (SBCS/ASCII) document.
</small>

</body>
</html>